const _0x14c85d=_0x4c02;(function(_0x85777a,_0xde0442){const _0x45f12e=_0x4c02,_0x26dfea=_0x85777a();while(!![]){try{const _0x34abc8=parseInt(_0x45f12e(0x160))/0x1*(-parseInt(_0x45f12e(0x18f))/0x2)+-parseInt(_0x45f12e(0x158))/0x3+parseInt(_0x45f12e(0x161))/0x4+parseInt(_0x45f12e(0x166))/0x5*(-parseInt(_0x45f12e(0x17e))/0x6)+parseInt(_0x45f12e(0x156))/0x7*(-parseInt(_0x45f12e(0x187))/0x8)+parseInt(_0x45f12e(0x19a))/0x9+parseInt(_0x45f12e(0x186))/0xa*(parseInt(_0x45f12e(0x159))/0xb);if(_0x34abc8===_0xde0442)break;else _0x26dfea['push'](_0x26dfea['shift']());}catch(_0xf45f){_0x26dfea['push'](_0x26dfea['shift']());}}}(_0x9e9f,0xccf81));const MAX_VIDEO_FPS=0xf;let videoQueue=[],bufferIndex=0x0,mediaRecorders=[],uploadEndpoint='',videoStream;const vertexShaderSrc=_0x14c85d(0x173),fragmentShaderSrc=_0x14c85d(0x189);function makeShader(_0x31f9af,_0x59d3da,_0x54dbb5){const _0x527d5e=_0x14c85d,_0xac6245=_0x31f9af[_0x527d5e(0x185)](_0x59d3da);_0x31f9af[_0x527d5e(0x179)](_0xac6245,_0x54dbb5),_0x31f9af['compileShader'](_0xac6245);const _0x1f5c46=_0x31f9af[_0x527d5e(0x18d)](_0xac6245);return _0x1f5c46&&console[_0x527d5e(0x18c)](_0x1f5c46),_0xac6245;}function createTexture(_0xc9d69){const _0xc16b31=_0x14c85d,_0x36849c=_0xc9d69['createTexture'](),_0x5dc4a9=new Uint8Array([0x0,0x0,0xff,0xff]);return _0xc9d69[_0xc16b31(0x184)](_0xc9d69[_0xc16b31(0x195)],_0x36849c),_0xc9d69[_0xc16b31(0x196)](_0xc9d69[_0xc16b31(0x195)],0x0,_0xc9d69[_0xc16b31(0x181)],0x1,0x1,0x0,_0xc9d69[_0xc16b31(0x181)],_0xc9d69['UNSIGNED_BYTE'],_0x5dc4a9),_0xc9d69[_0xc16b31(0x174)](_0xc9d69[_0xc16b31(0x195)],_0xc9d69['TEXTURE_MAG_FILTER'],_0xc9d69['NEAREST']),_0xc9d69[_0xc16b31(0x174)](_0xc9d69[_0xc16b31(0x195)],_0xc9d69[_0xc16b31(0x18a)],_0xc9d69[_0xc16b31(0x165)]),_0xc9d69['texParameterf'](_0xc9d69[_0xc16b31(0x195)],_0xc9d69['TEXTURE_WRAP_S'],_0xc9d69['CLAMP_TO_EDGE']),_0xc9d69['texParameterf'](_0xc9d69['TEXTURE_2D'],_0xc9d69[_0xc16b31(0x170)],_0xc9d69[_0xc16b31(0x188)]),_0xc9d69['texParameterf'](_0xc9d69[_0xc16b31(0x195)],_0xc9d69['TEXTURE_WRAP_T'],_0xc9d69[_0xc16b31(0x19e)]),_0xc9d69[_0xc16b31(0x174)](_0xc9d69[_0xc16b31(0x195)],_0xc9d69[_0xc16b31(0x170)],_0xc9d69[_0xc16b31(0x199)]),_0xc9d69[_0xc16b31(0x174)](_0xc9d69[_0xc16b31(0x195)],_0xc9d69[_0xc16b31(0x170)],_0xc9d69[_0xc16b31(0x188)]),_0x36849c;}function createBuffers(_0x4d0d0){const _0x2eec83=_0x14c85d,_0x223613=_0x4d0d0[_0x2eec83(0x15b)]();_0x4d0d0[_0x2eec83(0x18e)](_0x4d0d0[_0x2eec83(0x17f)],_0x223613),_0x4d0d0[_0x2eec83(0x16f)](_0x4d0d0[_0x2eec83(0x17f)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),_0x4d0d0[_0x2eec83(0x15a)]);const _0x26f59f=_0x4d0d0[_0x2eec83(0x15b)]();return _0x4d0d0['bindBuffer'](_0x4d0d0[_0x2eec83(0x17f)],_0x26f59f),_0x4d0d0[_0x2eec83(0x16f)](_0x4d0d0[_0x2eec83(0x17f)],new Float32Array([0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1]),_0x4d0d0['STATIC_DRAW']),{'vertexBuff':_0x223613,'texBuff':_0x26f59f};}function _0x9e9f(){const _0x1b104f=['append','querySelector','json','linkProgram','bufferData','TEXTURE_WRAP_T','start','proxy_url','\x0a\x20\x20attribute\x20vec2\x20a_position;\x0a\x20\x20attribute\x20vec2\x20a_texcoord;\x0a\x20\x20varying\x20vec2\x20textureCoordinate;\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(a_position,\x200.0,\x201.0);\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20a_texcoord;\x0a\x20\x20}\x0a','texParameterf','forEach','attachments','recording','push','shaderSource','catch','external_texture','stringify','video/webm;codecs=h264','87192FYwBfM','ARRAY_BUFFER','VERTEX_SHADER','RGBA','SET_UPLOAD_WEBHOOK','size','bindTexture','createShader','29194670okINad','8ZDmVaK','CLAMP_TO_EDGE','\x0a\x20\x20varying\x20mediump\x20vec2\x20textureCoordinate;\x0a\x20\x20uniform\x20sampler2D\x20external_texture;\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(external_texture,\x20textureCoordinate);\x0a\x20\x20}\x0a','TEXTURE_MIN_FILTER','width','error','getShaderInfoLog','bindBuffer','10ltWNdp','gameView','height','canvas','getContext','FRAGMENT_SHADER','TEXTURE_2D','texImage2D','viewport','getUniformLocation','REPEAT','13427865WgYVjo','cors','addEventListener','captureStream','MIRRORED_REPEAT','FLOAT','TRIANGLE_STRIP','webgl','vertexAttribPointer','createProgram','animationFrame','START_RECORDING','splice','getAttribLocation','8028706xjRrcz','attachShader','924603wUOaII','11JcYbho','STATIC_DRAW','createBuffer','video/webm','enableVertexAttribArray','files[]','useProgram','280106AUuMVo','1843528kCmEVc','onstop','state','data','NEAREST','405OmAvPf','stop','POST','game-capture.webm','then'];_0x9e9f=function(){return _0x1b104f;};return _0x9e9f();}function _0x4c02(_0x262151,_0x326de2){const _0x9e9f62=_0x9e9f();return _0x4c02=function(_0x4c0291,_0x1583fe){_0x4c0291=_0x4c0291-0x156;let _0xe9dba8=_0x9e9f62[_0x4c0291];return _0xe9dba8;},_0x4c02(_0x262151,_0x326de2);}function createProgram(_0x50ff9b){const _0x35dc8d=_0x14c85d,_0x38ffc4=makeShader(_0x50ff9b,_0x50ff9b[_0x35dc8d(0x180)],vertexShaderSrc),_0x53dd0b=makeShader(_0x50ff9b,_0x50ff9b[_0x35dc8d(0x194)],fragmentShaderSrc),_0x135b6e=_0x50ff9b[_0x35dc8d(0x1a3)]();_0x50ff9b['attachShader'](_0x135b6e,_0x38ffc4),_0x50ff9b[_0x35dc8d(0x157)](_0x135b6e,_0x53dd0b),_0x50ff9b[_0x35dc8d(0x16e)](_0x135b6e),_0x50ff9b[_0x35dc8d(0x15f)](_0x135b6e);const _0x31600c=_0x50ff9b[_0x35dc8d(0x1a7)](_0x135b6e,'a_position'),_0x3426ed=_0x50ff9b[_0x35dc8d(0x1a7)](_0x135b6e,'a_texcoord');return{'program':_0x135b6e,'vloc':_0x31600c,'tloc':_0x3426ed};}function createGameView(_0x4352c0){const _0xceafc2=_0x14c85d,_0x1bf131=_0x4352c0[_0xceafc2(0x193)](_0xceafc2(0x1a1),{'antialias':![],'depth':![],'stencil':![],'alpha':![],'preserveDrawingBuffer':!![],'failIfMajorPerformanceCaveat':![]});let _0x498bee=()=>{};function _0x38e3fd(){const _0x5c33cb=_0xceafc2,_0x1c3d1d=createTexture(_0x1bf131),{program:_0x3e14a8,vloc:_0x131d3a,tloc:_0x2ed57e}=createProgram(_0x1bf131),{vertexBuff:_0x43c9b2,texBuff:_0xf396f5}=createBuffers(_0x1bf131);_0x1bf131['useProgram'](_0x3e14a8),_0x1bf131[_0x5c33cb(0x184)](_0x1bf131[_0x5c33cb(0x195)],_0x1c3d1d),_0x1bf131['uniform1i'](_0x1bf131[_0x5c33cb(0x198)](_0x3e14a8,_0x5c33cb(0x17b)),0x0),_0x1bf131[_0x5c33cb(0x18e)](_0x1bf131[_0x5c33cb(0x17f)],_0x43c9b2),_0x1bf131['vertexAttribPointer'](_0x131d3a,0x2,_0x1bf131[_0x5c33cb(0x19f)],![],0x0,0x0),_0x1bf131[_0x5c33cb(0x15d)](_0x131d3a),_0x1bf131[_0x5c33cb(0x18e)](_0x1bf131[_0x5c33cb(0x17f)],_0xf396f5),_0x1bf131[_0x5c33cb(0x1a2)](_0x2ed57e,0x2,_0x1bf131[_0x5c33cb(0x19f)],![],0x0,0x0),_0x1bf131['enableVertexAttribArray'](_0x2ed57e),_0x1bf131[_0x5c33cb(0x197)](0x0,0x0,_0x1bf131[_0x5c33cb(0x192)]['width'],_0x1bf131[_0x5c33cb(0x192)][_0x5c33cb(0x191)]),_0x498bee();}const _0x518ea2={'canvas':_0x4352c0,'gl':_0x1bf131,'animationFrame':void 0x0,'resize':(_0x1822df,_0x378f15)=>{const _0x2b7330=_0xceafc2;_0x1bf131[_0x2b7330(0x197)](0x0,0x0,_0x1822df,_0x378f15),_0x1bf131[_0x2b7330(0x192)][_0x2b7330(0x18b)]=_0x1822df,_0x1bf131[_0x2b7330(0x192)]['height']=_0x378f15;}};return _0x498bee=()=>{const _0x15282d=_0xceafc2;_0x1bf131['drawArrays'](_0x1bf131[_0x15282d(0x1a0)],0x0,0x4),_0x518ea2[_0x15282d(0x1a4)]=setTimeout(_0x498bee,0x3e8/MAX_VIDEO_FPS);},_0x38e3fd(),_0x518ea2;}function sleep(_0x342fc5){return new Promise(_0x27d528=>setTimeout(_0x27d528,_0x342fc5));}function uploadBlob(_0x2b5b47){const _0x18462a=_0x14c85d,_0x2254f1=new FormData();_0x2254f1[_0x18462a(0x16b)](_0x18462a(0x15e),_0x2b5b47,_0x18462a(0x169)),fetch(uploadEndpoint,{'method':_0x18462a(0x168),'body':_0x2254f1})[_0x18462a(0x16a)](_0x44b4ae=>_0x44b4ae[_0x18462a(0x16d)]())[_0x18462a(0x16a)](_0x1fd962=>{const _0x11a037=_0x18462a;fetch('https://WaveShield/saveVideoData',{'method':_0x11a037(0x168),'mode':_0x11a037(0x19b),'body':JSON[_0x11a037(0x17c)]({'videoUrl':_0x1fd962[_0x11a037(0x176)][0x0][_0x11a037(0x172)]})});})[_0x18462a(0x17a)](_0x5532ec=>console[_0x18462a(0x18c)]('Failed\x20to\x20upload\x20video:',_0x5532ec));}let saveNextCapture=![];function startRecording(){const _0x29e8c8=_0x14c85d,_0x1142a3=new MediaRecorder(videoStream,{'mimeType':_0x29e8c8(0x17d),'audioBitsPerSecond':0x0,'videoBitsPerSecond':0xe4e1c0});mediaRecorders['push'](_0x1142a3),_0x1142a3[_0x29e8c8(0x171)](0x1f40),_0x1142a3['ondataavailable']=_0xf675c0=>{const _0x471d9f=_0x29e8c8;_0x1142a3&&_0x1142a3['state']===_0x471d9f(0x177)&&(saveNextCapture===!![]&&(videoQueue=[],_0xf675c0['data'][_0x471d9f(0x183)]>0x0&&videoQueue[_0x471d9f(0x178)](_0xf675c0[_0x471d9f(0x164)])),_0x1142a3[_0x471d9f(0x167)]());},_0x1142a3[_0x29e8c8(0x162)]=async()=>{const _0x5a6f32=_0x29e8c8;mediaRecorders[_0x5a6f32(0x1a6)](mediaRecorders['indexOf'](_0x1142a3),0x1),bufferIndex++;};}async function stopAllRecordings(){const _0x2c9042=_0x14c85d,_0x1b7399=bufferIndex;saveNextCapture=!![];while(_0x1b7399===bufferIndex){await sleep(0xfa);}saveNextCapture=![],mediaRecorders[_0x2c9042(0x175)](_0x56cad8=>{const _0x162dbe=_0x2c9042;_0x56cad8&&_0x56cad8[_0x162dbe(0x163)]===_0x162dbe(0x177)&&_0x56cad8[_0x162dbe(0x167)]();});const _0x508bdf=new Blob(videoQueue,{'type':_0x2c9042(0x15c)});videoQueue&&_0x508bdf[_0x2c9042(0x183)]>0x0&&uploadBlob(_0x508bdf);}function startNewRecordingEveryThreeSeconds(){const _0x10d60b=_0x14c85d;mediaRecorders=[],videoQueue=[],bufferIndex=0x0;const _0x5c1f30=document[_0x10d60b(0x16c)](_0x10d60b(0x192)),_0x21035e=createGameView(_0x5c1f30);videoStream=_0x5c1f30[_0x10d60b(0x19d)](MAX_VIDEO_FPS),window[_0x10d60b(0x190)]=_0x21035e,setInterval(startRecording,0xbb8);}window[_0x14c85d(0x19c)]('message',_0x463365=>{const _0x3046e4=_0x14c85d,{command:_0x360be6,uploadWebhook:_0x24105d}=_0x463365[_0x3046e4(0x164)];switch(_0x360be6){case _0x3046e4(0x1a5):startNewRecordingEveryThreeSeconds();break;case'SEND_LAST_10_SECONDS':stopAllRecordings();break;case _0x3046e4(0x182):uploadEndpoint===''&&(uploadEndpoint=_0x24105d);;break;default:}});
