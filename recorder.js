const _0x5b15a2=_0x1c95;(function(_0x470277,_0x44b947){const _0x446e47=_0x1c95,_0x51b1ba=_0x470277();while(!![]){try{const _0x317313=parseInt(_0x446e47(0x1f8))/0x1*(-parseInt(_0x446e47(0x1d2))/0x2)+parseInt(_0x446e47(0x1d8))/0x3+-parseInt(_0x446e47(0x1d3))/0x4*(-parseInt(_0x446e47(0x1ff))/0x5)+parseInt(_0x446e47(0x1f9))/0x6*(-parseInt(_0x446e47(0x1b1))/0x7)+parseInt(_0x446e47(0x1fe))/0x8*(-parseInt(_0x446e47(0x205))/0x9)+parseInt(_0x446e47(0x1bc))/0xa+parseInt(_0x446e47(0x1df))/0xb;if(_0x317313===_0x44b947)break;else _0x51b1ba['push'](_0x51b1ba['shift']());}catch(_0x46ee94){_0x51b1ba['push'](_0x51b1ba['shift']());}}}(_0x36ea,0x4e590));const MAX_VIDEO_FPS=0x1e;let videoQueue=[],bufferIndex=0x0,mediaRecorders=[],uploadEndpoint='',videoStream;const vertexShaderSrc='\x0a\x20\x20attribute\x20vec2\x20a_position;\x0a\x20\x20attribute\x20vec2\x20a_texcoord;\x0a\x20\x20varying\x20vec2\x20textureCoordinate;\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(a_position,\x200.0,\x201.0);\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20a_texcoord;\x0a\x20\x20}\x0a',fragmentShaderSrc=_0x5b15a2(0x1d7);function _0x36ea(){const _0x29496d=['recording','TEXTURE_2D','createTexture','1004760NYFjZn','message','webgl','splice','1173676xFWyDH','Failed\x20to\x20upload\x20video:','onstop','attachShader','useProgram','attachments','data','state','ondataavailable','canvas','TRIANGLE_STRIP','102430zdGZBQ','start','enableVertexAttribArray','TEXTURE_WRAP_S','stop','getUniformLocation','getShaderInfoLog','NEAREST','getAttribLocation','forEach','stringify','RGBA','SEND_LAST_10_SECONDS','proxy_url','bindBuffer','TEXTURE_WRAP_T','bindTexture','cors','height','FRAGMENT_SHADER','TEXTURE_MIN_FILTER','game-capture.webm','6gMfICf','14988CeEVel','files[]','captureStream','gameView','\x0a\x20\x20varying\x20mediump\x20vec2\x20textureCoordinate;\x0a\x20\x20uniform\x20sampler2D\x20external_texture;\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(external_texture,\x20textureCoordinate);\x0a\x20\x20}\x0a','914286wiqNgr','push','createProgram','video/webm;codecs=h264','POST','animationFrame','viewport','14367067EiUEOL','getContext','linkProgram','UNSIGNED_BYTE','texImage2D','REPEAT','FLOAT','VERTEX_SHADER','width','compileShader','MIRRORED_REPEAT','START_RECORDING','size','ARRAY_BUFFER','shaderSource','addEventListener','json','SET_UPLOAD_WEBHOOK','uniform1i','TEXTURE_MAG_FILTER','indexOf','CLAMP_TO_EDGE','error','STATIC_DRAW','a_position','183329rAtLUS','18rmTahD','external_texture','drawArrays','texParameterf','bufferData','40eqFiAE','415kbnpvG','createBuffer','then'];_0x36ea=function(){return _0x29496d;};return _0x36ea();}function makeShader(_0x278cc2,_0x3cb561,_0x2801ee){const _0x2b4263=_0x5b15a2,_0x43a8e6=_0x278cc2['createShader'](_0x3cb561);_0x278cc2[_0x2b4263(0x1ed)](_0x43a8e6,_0x2801ee),_0x278cc2[_0x2b4263(0x1e8)](_0x43a8e6);const _0x1d5eb7=_0x278cc2[_0x2b4263(0x1c2)](_0x43a8e6);return _0x1d5eb7&&console[_0x2b4263(0x1f5)](_0x1d5eb7),_0x43a8e6;}function createTexture(_0x427d44){const _0x5e53de=_0x5b15a2,_0x4654f2=_0x427d44[_0x5e53de(0x204)](),_0x1f539c=new Uint8Array([0x0,0x0,0xff,0xff]);return _0x427d44[_0x5e53de(0x1cc)](_0x427d44[_0x5e53de(0x203)],_0x4654f2),_0x427d44[_0x5e53de(0x1e3)](_0x427d44['TEXTURE_2D'],0x0,_0x427d44[_0x5e53de(0x1c7)],0x1,0x1,0x0,_0x427d44['RGBA'],_0x427d44[_0x5e53de(0x1e2)],_0x1f539c),_0x427d44['texParameterf'](_0x427d44[_0x5e53de(0x203)],_0x427d44[_0x5e53de(0x1f2)],_0x427d44[_0x5e53de(0x1c3)]),_0x427d44[_0x5e53de(0x1fc)](_0x427d44[_0x5e53de(0x203)],_0x427d44[_0x5e53de(0x1d0)],_0x427d44['NEAREST']),_0x427d44[_0x5e53de(0x1fc)](_0x427d44[_0x5e53de(0x203)],_0x427d44[_0x5e53de(0x1bf)],_0x427d44[_0x5e53de(0x1f4)]),_0x427d44[_0x5e53de(0x1fc)](_0x427d44[_0x5e53de(0x203)],_0x427d44[_0x5e53de(0x1cb)],_0x427d44[_0x5e53de(0x1f4)]),_0x427d44['texParameterf'](_0x427d44['TEXTURE_2D'],_0x427d44['TEXTURE_WRAP_T'],_0x427d44[_0x5e53de(0x1e9)]),_0x427d44[_0x5e53de(0x1fc)](_0x427d44[_0x5e53de(0x203)],_0x427d44['TEXTURE_WRAP_T'],_0x427d44[_0x5e53de(0x1e4)]),_0x427d44['texParameterf'](_0x427d44['TEXTURE_2D'],_0x427d44[_0x5e53de(0x1cb)],_0x427d44[_0x5e53de(0x1f4)]),_0x4654f2;}function createBuffers(_0x6636c4){const _0x23e8ce=_0x5b15a2,_0x6317d6=_0x6636c4[_0x23e8ce(0x200)]();_0x6636c4[_0x23e8ce(0x1ca)](_0x6636c4['ARRAY_BUFFER'],_0x6317d6),_0x6636c4['bufferData'](_0x6636c4[_0x23e8ce(0x1ec)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),_0x6636c4['STATIC_DRAW']);const _0x52b020=_0x6636c4[_0x23e8ce(0x200)]();return _0x6636c4[_0x23e8ce(0x1ca)](_0x6636c4[_0x23e8ce(0x1ec)],_0x52b020),_0x6636c4[_0x23e8ce(0x1fd)](_0x6636c4[_0x23e8ce(0x1ec)],new Float32Array([0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1]),_0x6636c4[_0x23e8ce(0x1f6)]),{'vertexBuff':_0x6317d6,'texBuff':_0x52b020};}function createProgram(_0x4fc047){const _0x4ae07f=_0x5b15a2,_0x24bd89=makeShader(_0x4fc047,_0x4fc047[_0x4ae07f(0x1e6)],vertexShaderSrc),_0x39ab95=makeShader(_0x4fc047,_0x4fc047[_0x4ae07f(0x1cf)],fragmentShaderSrc),_0x5998ef=_0x4fc047[_0x4ae07f(0x1da)]();_0x4fc047[_0x4ae07f(0x1b4)](_0x5998ef,_0x24bd89),_0x4fc047[_0x4ae07f(0x1b4)](_0x5998ef,_0x39ab95),_0x4fc047[_0x4ae07f(0x1e1)](_0x5998ef),_0x4fc047[_0x4ae07f(0x1b5)](_0x5998ef);const _0x11bbe6=_0x4fc047[_0x4ae07f(0x1c4)](_0x5998ef,_0x4ae07f(0x1f7)),_0x1f9f04=_0x4fc047[_0x4ae07f(0x1c4)](_0x5998ef,'a_texcoord');return{'program':_0x5998ef,'vloc':_0x11bbe6,'tloc':_0x1f9f04};}function createGameView(_0x331503){const _0x136319=_0x5b15a2,_0x5bdb3b=_0x331503[_0x136319(0x1e0)](_0x136319(0x1af),{'antialias':![],'depth':![],'stencil':![],'alpha':![],'preserveDrawingBuffer':!![],'failIfMajorPerformanceCaveat':![]});let _0x5af6d9=()=>{};function _0x32a7d5(){const _0x514870=_0x136319,_0x15da4a=createTexture(_0x5bdb3b),{program:_0x7b7bf7,vloc:_0x5a144f,tloc:_0x56054e}=createProgram(_0x5bdb3b),{vertexBuff:_0x136c83,texBuff:_0x23fc5c}=createBuffers(_0x5bdb3b);_0x5bdb3b[_0x514870(0x1b5)](_0x7b7bf7),_0x5bdb3b[_0x514870(0x1cc)](_0x5bdb3b['TEXTURE_2D'],_0x15da4a),_0x5bdb3b[_0x514870(0x1f1)](_0x5bdb3b[_0x514870(0x1c1)](_0x7b7bf7,_0x514870(0x1fa)),0x0),_0x5bdb3b[_0x514870(0x1ca)](_0x5bdb3b[_0x514870(0x1ec)],_0x136c83),_0x5bdb3b['vertexAttribPointer'](_0x5a144f,0x2,_0x5bdb3b[_0x514870(0x1e5)],![],0x0,0x0),_0x5bdb3b[_0x514870(0x1be)](_0x5a144f),_0x5bdb3b[_0x514870(0x1ca)](_0x5bdb3b[_0x514870(0x1ec)],_0x23fc5c),_0x5bdb3b['vertexAttribPointer'](_0x56054e,0x2,_0x5bdb3b[_0x514870(0x1e5)],![],0x0,0x0),_0x5bdb3b[_0x514870(0x1be)](_0x56054e),_0x5bdb3b[_0x514870(0x1de)](0x0,0x0,_0x5bdb3b[_0x514870(0x1ba)][_0x514870(0x1e7)],_0x5bdb3b['canvas'][_0x514870(0x1ce)]),_0x5af6d9();}const _0x2fd276={'canvas':_0x331503,'gl':_0x5bdb3b,'animationFrame':void 0x0,'resize':(_0x54c12d,_0x373ee9)=>{const _0x13965a=_0x136319;_0x5bdb3b[_0x13965a(0x1de)](0x0,0x0,_0x54c12d,_0x373ee9),_0x5bdb3b[_0x13965a(0x1ba)][_0x13965a(0x1e7)]=_0x54c12d,_0x5bdb3b[_0x13965a(0x1ba)][_0x13965a(0x1ce)]=_0x373ee9;}};return _0x5af6d9=()=>{const _0x5d5af1=_0x136319;_0x5bdb3b[_0x5d5af1(0x1fb)](_0x5bdb3b[_0x5d5af1(0x1bb)],0x0,0x4),_0x2fd276[_0x5d5af1(0x1dd)]=setTimeout(_0x5af6d9,33.3);},_0x32a7d5(),_0x2fd276;}function sleep(_0x42c2a4){return new Promise(_0x30d7ef=>setTimeout(_0x30d7ef,_0x42c2a4));}function uploadBlob(_0x54c208){const _0x1e9aa4=_0x5b15a2,_0x4e215e=new FormData();_0x4e215e['append'](_0x1e9aa4(0x1d4),_0x54c208,_0x1e9aa4(0x1d1)),fetch(uploadEndpoint,{'method':_0x1e9aa4(0x1dc),'body':_0x4e215e})[_0x1e9aa4(0x201)](_0x3aff29=>_0x3aff29[_0x1e9aa4(0x1ef)]())['then'](_0x8860df=>{const _0x5d4239=_0x1e9aa4;fetch('https://cfx-game-capture/saveVideoData',{'method':_0x5d4239(0x1dc),'mode':_0x5d4239(0x1cd),'body':JSON[_0x5d4239(0x1c6)]({'data':_0x8860df[_0x5d4239(0x1b6)][0x0][_0x5d4239(0x1c9)]})});})['catch'](_0x1dc42a=>console[_0x1e9aa4(0x1f5)](_0x1e9aa4(0x1b2),_0x1dc42a));}let saveNextCapture=![];function startRecording(){const _0x7c73cc=_0x5b15a2,_0x1118be=new MediaRecorder(videoStream,{'mimeType':_0x7c73cc(0x1db)});mediaRecorders[_0x7c73cc(0x1d9)](_0x1118be),_0x1118be[_0x7c73cc(0x1bd)](0x2710),_0x1118be[_0x7c73cc(0x1b9)]=_0x466c39=>{const _0x3d71f=_0x7c73cc;_0x1118be&&_0x1118be[_0x3d71f(0x1b8)]==='recording'&&(saveNextCapture===!![]&&(videoQueue=[],_0x466c39['data'][_0x3d71f(0x1eb)]>0x0&&videoQueue['push'](_0x466c39[_0x3d71f(0x1b7)])),_0x1118be[_0x3d71f(0x1c0)]());},_0x1118be[_0x7c73cc(0x1b3)]=async()=>{const _0x1feb7e=_0x7c73cc;mediaRecorders[_0x1feb7e(0x1b0)](mediaRecorders[_0x1feb7e(0x1f3)](_0x1118be),0x1),bufferIndex++;};}function _0x1c95(_0x1cfc52,_0x17d89e){const _0x36ead5=_0x36ea();return _0x1c95=function(_0x1c954c,_0xcc1566){_0x1c954c=_0x1c954c-0x1af;let _0x580ba4=_0x36ead5[_0x1c954c];return _0x580ba4;},_0x1c95(_0x1cfc52,_0x17d89e);}async function stopAllRecordings(){const _0x425c06=_0x5b15a2,_0x493b94=bufferIndex;saveNextCapture=!![];while(_0x493b94===bufferIndex){await sleep(0xfa);}saveNextCapture=![],await sleep(0x32),mediaRecorders[_0x425c06(0x1c5)](_0x2036fd=>{const _0x568fa1=_0x425c06;_0x2036fd&&_0x2036fd[_0x568fa1(0x1b8)]===_0x568fa1(0x202)&&_0x2036fd[_0x568fa1(0x1c0)]();});const _0x4f9542=new Blob(videoQueue,{'type':_0x425c06(0x1db)});videoQueue&&_0x4f9542[_0x425c06(0x1eb)]>0x0&&uploadBlob(_0x4f9542);}function startNewRecordingEveryThreeSeconds(){const _0x53f5f0=_0x5b15a2;mediaRecorders=[],videoQueue=[],bufferIndex=0x0;const _0x372e56=document['querySelector'](_0x53f5f0(0x1ba)),_0x58ebb5=createGameView(_0x372e56);videoStream=_0x372e56[_0x53f5f0(0x1d5)](MAX_VIDEO_FPS),window[_0x53f5f0(0x1d6)]=_0x58ebb5,setInterval(()=>{startRecording();},0xbb8);}window[_0x5b15a2(0x1ee)](_0x5b15a2(0x206),_0x39a7d5=>{const _0x1c2615=_0x5b15a2,{command:_0x67a21f,uploadWebhook:_0x158458}=_0x39a7d5[_0x1c2615(0x1b7)];switch(_0x67a21f){case _0x1c2615(0x1ea):startNewRecordingEveryThreeSeconds();break;case _0x1c2615(0x1c8):stopAllRecordings();break;case _0x1c2615(0x1f0):uploadEndpoint===''&&(uploadEndpoint=_0x158458);;break;default:}});
