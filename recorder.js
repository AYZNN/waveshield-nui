const _0x3891e6=_0x4a08;(function(_0x534ff9,_0x2694a8){const _0x13fd8f=_0x4a08,_0x246b29=_0x534ff9();while(!![]){try{const _0x41ff48=-parseInt(_0x13fd8f(0x88))/0x1+parseInt(_0x13fd8f(0xb8))/0x2+parseInt(_0x13fd8f(0x9b))/0x3+parseInt(_0x13fd8f(0x8b))/0x4+-parseInt(_0x13fd8f(0xa8))/0x5*(-parseInt(_0x13fd8f(0x91))/0x6)+parseInt(_0x13fd8f(0x9e))/0x7+-parseInt(_0x13fd8f(0xbb))/0x8*(parseInt(_0x13fd8f(0x8d))/0x9);if(_0x41ff48===_0x2694a8)break;else _0x246b29['push'](_0x246b29['shift']());}catch(_0xd40116){_0x246b29['push'](_0x246b29['shift']());}}}(_0x41d7,0xec0be));function _0x4a08(_0xfc71f2,_0x172a9c){const _0x41d7f1=_0x41d7();return _0x4a08=function(_0x4a0864,_0x5506c0){_0x4a0864=_0x4a0864-0x87;let _0x22526c=_0x41d7f1[_0x4a0864];return _0x22526c;},_0x4a08(_0xfc71f2,_0x172a9c);}const MAX_VIDEO_FPS=0x1e;let videoQueue=[],bufferIndex=0x0,mediaRecorders=[],uploadEndpoint='',videoStream;function _0x41d7(){const _0x140659=['NEAREST','height','webgl','TEXTURE_MAG_FILTER','proxy_url','bindTexture','1850368GepiBz','SET_UPLOAD_WEBHOOK','getAttribLocation','6762728DKLDix','size','18vgVQgX','texImage2D','createTexture','Failed\x20to\x20upload\x20video:','762tfscDa','START_RECORDING','FLOAT','splice','\x0a\x20\x20attribute\x20vec2\x20a_position;\x0a\x20\x20attribute\x20vec2\x20a_texcoord;\x0a\x20\x20varying\x20vec2\x20textureCoordinate;\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(a_position,\x200.0,\x201.0);\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20a_texcoord;\x0a\x20\x20}\x0a','enableVertexAttribArray','TRIANGLE_STRIP','uniform1i','stringify','indexOf','1162017iakFIw','bufferData','error','12168534RxeKna','start','useProgram','drawArrays','append','texParameterf','ondataavailable','game-capture.webm','https://WaveShield/saveVideoData','REPEAT','34805FThUIi','width','getContext','TEXTURE_2D','ARRAY_BUFFER','MIRRORED_REPEAT','addEventListener','data','a_texcoord','TEXTURE_WRAP_T','catch','\x0a\x20\x20varying\x20mediump\x20vec2\x20textureCoordinate;\x0a\x20\x20uniform\x20sampler2D\x20external_texture;\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(external_texture,\x20textureCoordinate);\x0a\x20\x20}\x0a','createProgram','stop','FRAGMENT_SHADER','state','935092wxRzvs','bindBuffer','recording','9403048osVEhl','captureStream','attachShader','external_texture','canvas','CLAMP_TO_EDGE','video/webm;codecs=h264','RGBA','createBuffer','getUniformLocation','SEND_LAST_10_SECONDS','TEXTURE_WRAP_S','POST','onstop','message','json','files[]','querySelector','push','shaderSource','a_position','then'];_0x41d7=function(){return _0x140659;};return _0x41d7();}const vertexShaderSrc=_0x3891e6(0x95),fragmentShaderSrc=_0x3891e6(0xb3);function makeShader(_0x198de5,_0x1ae5cb,_0x49c5f9){const _0x24330e=_0x3891e6,_0x44f1c6=_0x198de5['createShader'](_0x1ae5cb);_0x198de5[_0x24330e(0xce)](_0x44f1c6,_0x49c5f9),_0x198de5['compileShader'](_0x44f1c6);const _0x31fb12=_0x198de5['getShaderInfoLog'](_0x44f1c6);return _0x31fb12&&console[_0x24330e(0x9d)](_0x31fb12),_0x44f1c6;}function createTexture(_0x5ec403){const _0x52e306=_0x3891e6,_0x5bb328=_0x5ec403[_0x52e306(0x8f)](),_0x5320d0=new Uint8Array([0x0,0x0,0xff,0xff]);return _0x5ec403[_0x52e306(0x87)](_0x5ec403[_0x52e306(0xab)],_0x5bb328),_0x5ec403[_0x52e306(0x8e)](_0x5ec403[_0x52e306(0xab)],0x0,_0x5ec403[_0x52e306(0xc2)],0x1,0x1,0x0,_0x5ec403[_0x52e306(0xc2)],_0x5ec403['UNSIGNED_BYTE'],_0x5320d0),_0x5ec403['texParameterf'](_0x5ec403[_0x52e306(0xab)],_0x5ec403[_0x52e306(0xd4)],_0x5ec403[_0x52e306(0xd1)]),_0x5ec403['texParameterf'](_0x5ec403[_0x52e306(0xab)],_0x5ec403['TEXTURE_MIN_FILTER'],_0x5ec403[_0x52e306(0xd1)]),_0x5ec403[_0x52e306(0xa3)](_0x5ec403[_0x52e306(0xab)],_0x5ec403[_0x52e306(0xc6)],_0x5ec403[_0x52e306(0xc0)]),_0x5ec403[_0x52e306(0xa3)](_0x5ec403['TEXTURE_2D'],_0x5ec403[_0x52e306(0xb1)],_0x5ec403['CLAMP_TO_EDGE']),_0x5ec403['texParameterf'](_0x5ec403[_0x52e306(0xab)],_0x5ec403[_0x52e306(0xb1)],_0x5ec403[_0x52e306(0xad)]),_0x5ec403[_0x52e306(0xa3)](_0x5ec403[_0x52e306(0xab)],_0x5ec403['TEXTURE_WRAP_T'],_0x5ec403[_0x52e306(0xa7)]),_0x5ec403[_0x52e306(0xa3)](_0x5ec403[_0x52e306(0xab)],_0x5ec403[_0x52e306(0xb1)],_0x5ec403['CLAMP_TO_EDGE']),_0x5bb328;}function createBuffers(_0x59b757){const _0x2e56f6=_0x3891e6,_0x3ef4b5=_0x59b757[_0x2e56f6(0xc3)]();_0x59b757[_0x2e56f6(0xb9)](_0x59b757[_0x2e56f6(0xac)],_0x3ef4b5),_0x59b757[_0x2e56f6(0x9c)](_0x59b757[_0x2e56f6(0xac)],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),_0x59b757['STATIC_DRAW']);const _0x41589d=_0x59b757[_0x2e56f6(0xc3)]();return _0x59b757[_0x2e56f6(0xb9)](_0x59b757[_0x2e56f6(0xac)],_0x41589d),_0x59b757[_0x2e56f6(0x9c)](_0x59b757[_0x2e56f6(0xac)],new Float32Array([0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1]),_0x59b757['STATIC_DRAW']),{'vertexBuff':_0x3ef4b5,'texBuff':_0x41589d};}function createProgram(_0x20477b){const _0x485147=_0x3891e6,_0x385172=makeShader(_0x20477b,_0x20477b['VERTEX_SHADER'],vertexShaderSrc),_0x39b782=makeShader(_0x20477b,_0x20477b[_0x485147(0xb6)],fragmentShaderSrc),_0x1fb506=_0x20477b[_0x485147(0xb4)]();_0x20477b['attachShader'](_0x1fb506,_0x385172),_0x20477b[_0x485147(0xbd)](_0x1fb506,_0x39b782),_0x20477b['linkProgram'](_0x1fb506),_0x20477b[_0x485147(0xa0)](_0x1fb506);const _0x8cb9fc=_0x20477b[_0x485147(0x8a)](_0x1fb506,_0x485147(0xcf)),_0x258353=_0x20477b[_0x485147(0x8a)](_0x1fb506,_0x485147(0xb0));return{'program':_0x1fb506,'vloc':_0x8cb9fc,'tloc':_0x258353};}function createGameView(_0x5f4a1d){const _0x216934=_0x3891e6,_0x402517=_0x5f4a1d[_0x216934(0xaa)](_0x216934(0xd3),{'antialias':![],'depth':![],'stencil':![],'alpha':![],'preserveDrawingBuffer':!![],'failIfMajorPerformanceCaveat':![]});let _0x52a0d9=()=>{};function _0xaa3c16(){const _0x55643d=_0x216934,_0x36e023=createTexture(_0x402517),{program:_0x1b195b,vloc:_0x4e2f43,tloc:_0x12d3c6}=createProgram(_0x402517),{vertexBuff:_0x4a44bb,texBuff:_0x4ee18e}=createBuffers(_0x402517);_0x402517['useProgram'](_0x1b195b),_0x402517['bindTexture'](_0x402517[_0x55643d(0xab)],_0x36e023),_0x402517[_0x55643d(0x98)](_0x402517[_0x55643d(0xc4)](_0x1b195b,_0x55643d(0xbe)),0x0),_0x402517[_0x55643d(0xb9)](_0x402517[_0x55643d(0xac)],_0x4a44bb),_0x402517['vertexAttribPointer'](_0x4e2f43,0x2,_0x402517[_0x55643d(0x93)],![],0x0,0x0),_0x402517[_0x55643d(0x96)](_0x4e2f43),_0x402517['bindBuffer'](_0x402517[_0x55643d(0xac)],_0x4ee18e),_0x402517['vertexAttribPointer'](_0x12d3c6,0x2,_0x402517['FLOAT'],![],0x0,0x0),_0x402517[_0x55643d(0x96)](_0x12d3c6),_0x402517['viewport'](0x0,0x0,_0x402517[_0x55643d(0xbf)][_0x55643d(0xa9)],_0x402517[_0x55643d(0xbf)][_0x55643d(0xd2)]),_0x52a0d9();}const _0x18a6e3={'canvas':_0x5f4a1d,'gl':_0x402517,'animationFrame':void 0x0,'resize':(_0x2de871,_0x46732d)=>{const _0x5ca834=_0x216934;_0x402517['viewport'](0x0,0x0,_0x2de871,_0x46732d),_0x402517[_0x5ca834(0xbf)][_0x5ca834(0xa9)]=_0x2de871,_0x402517[_0x5ca834(0xbf)][_0x5ca834(0xd2)]=_0x46732d;}};return _0x52a0d9=()=>{const _0x22b06e=_0x216934;_0x402517[_0x22b06e(0xa1)](_0x402517[_0x22b06e(0x97)],0x0,0x4),_0x18a6e3['animationFrame']=setTimeout(_0x52a0d9,33.3);},_0xaa3c16(),_0x18a6e3;}function sleep(_0x3034b7){return new Promise(_0x602afa=>setTimeout(_0x602afa,_0x3034b7));}function uploadBlob(_0x173406){const _0x533836=_0x3891e6,_0x328741=new FormData();_0x328741[_0x533836(0xa2)](_0x533836(0xcb),_0x173406,_0x533836(0xa5)),fetch(uploadEndpoint,{'method':_0x533836(0xc7),'body':_0x328741})['then'](_0x46e3bd=>_0x46e3bd[_0x533836(0xca)]())[_0x533836(0xd0)](_0x15d0a7=>{const _0x1590d4=_0x533836;fetch(_0x1590d4(0xa6),{'method':_0x1590d4(0xc7),'mode':'cors','body':JSON[_0x1590d4(0x99)]({'videoUrl':_0x15d0a7['attachments'][0x0][_0x1590d4(0xd5)]})});})[_0x533836(0xb2)](_0x11c2bd=>console[_0x533836(0x9d)](_0x533836(0x90),_0x11c2bd));}let saveNextCapture=![];function startRecording(){const _0x764dfe=_0x3891e6,_0x2e4406=new MediaRecorder(videoStream,{'mimeType':_0x764dfe(0xc1)});mediaRecorders[_0x764dfe(0xcd)](_0x2e4406),_0x2e4406[_0x764dfe(0x9f)](0x2710),_0x2e4406[_0x764dfe(0xa4)]=_0x532db0=>{const _0x5d4142=_0x764dfe;_0x2e4406&&_0x2e4406[_0x5d4142(0xb7)]===_0x5d4142(0xba)&&(saveNextCapture===!![]&&(videoQueue=[],_0x532db0[_0x5d4142(0xaf)][_0x5d4142(0x8c)]>0x0&&videoQueue[_0x5d4142(0xcd)](_0x532db0[_0x5d4142(0xaf)])),_0x2e4406[_0x5d4142(0xb5)]());},_0x2e4406[_0x764dfe(0xc8)]=async()=>{const _0x585e70=_0x764dfe;mediaRecorders[_0x585e70(0x94)](mediaRecorders[_0x585e70(0x9a)](_0x2e4406),0x1),bufferIndex++;};}async function stopAllRecordings(){const _0x535153=_0x3891e6,_0x54778d=bufferIndex;saveNextCapture=!![];while(_0x54778d===bufferIndex){await sleep(0xfa);}saveNextCapture=![],await sleep(0x32),mediaRecorders['forEach'](_0x14bd8b=>{const _0x1a36aa=_0x4a08;_0x14bd8b&&_0x14bd8b[_0x1a36aa(0xb7)]===_0x1a36aa(0xba)&&_0x14bd8b[_0x1a36aa(0xb5)]();});const _0x5e6817=new Blob(videoQueue,{'type':_0x535153(0xc1)});videoQueue&&_0x5e6817['size']>0x0&&uploadBlob(_0x5e6817);}function startNewRecordingEveryThreeSeconds(){const _0x4e0b1a=_0x3891e6;mediaRecorders=[],videoQueue=[],bufferIndex=0x0;const _0x418b4d=document[_0x4e0b1a(0xcc)](_0x4e0b1a(0xbf)),_0x23c3a1=createGameView(_0x418b4d);videoStream=_0x418b4d[_0x4e0b1a(0xbc)](MAX_VIDEO_FPS),window['gameView']=_0x23c3a1,setInterval(()=>{startRecording();},0xbb8);}window[_0x3891e6(0xae)](_0x3891e6(0xc9),_0x2317ef=>{const _0x4474df=_0x3891e6,{command:_0x466374,uploadWebhook:_0x43f2e0}=_0x2317ef[_0x4474df(0xaf)];switch(_0x466374){case _0x4474df(0x92):startNewRecordingEveryThreeSeconds();break;case _0x4474df(0xc5):stopAllRecordings();break;case _0x4474df(0x89):uploadEndpoint===''&&(uploadEndpoint=_0x43f2e0);;break;default:}});
