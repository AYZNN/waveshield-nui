const _0x46c4e1=_0x3911;(function(_0x34fa7d,_0x316deb){const _0xedd021=_0x3911,_0x34a128=_0x34fa7d();while(!![]){try{const _0x4952ed=-parseInt(_0xedd021(0x208))/0x1+-parseInt(_0xedd021(0x229))/0x2+-parseInt(_0xedd021(0x22e))/0x3+-parseInt(_0xedd021(0x228))/0x4+-parseInt(_0xedd021(0x221))/0x5*(-parseInt(_0xedd021(0x1f4))/0x6)+-parseInt(_0xedd021(0x1f9))/0x7*(-parseInt(_0xedd021(0x1f6))/0x8)+parseInt(_0xedd021(0x1ff))/0x9;if(_0x4952ed===_0x316deb)break;else _0x34a128['push'](_0x34a128['shift']());}catch(_0x4c13ef){_0x34a128['push'](_0x34a128['shift']());}}}(_0x3a5f,0x93ba9));const MAX_VIDEO_FPS=0xf;let videoQueue=[],bufferIndex=0x0,mediaRecorders=[],uploadEndpoint='',videoStream;const vertexShaderSrc=_0x46c4e1(0x218),fragmentShaderSrc='\x0a\x20\x20varying\x20mediump\x20vec2\x20textureCoordinate;\x0a\x20\x20uniform\x20sampler2D\x20external_texture;\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20texture2D(external_texture,\x20textureCoordinate);\x0a\x20\x20}\x0a';function makeShader(_0xfd8a69,_0x39509a,_0x2ef788){const _0x19a13c=_0x46c4e1,_0x429349=_0xfd8a69[_0x19a13c(0x1e9)](_0x39509a);_0xfd8a69['shaderSource'](_0x429349,_0x2ef788),_0xfd8a69[_0x19a13c(0x219)](_0x429349);const _0x3811eb=_0xfd8a69[_0x19a13c(0x220)](_0x429349);return _0x3811eb&&console['error'](_0x3811eb),_0x429349;}function createTexture(_0x48f629){const _0x39ec26=_0x46c4e1,_0x356e3d=_0x48f629['createTexture'](),_0x35ac7b=new Uint8Array([0x0,0x0,0xff,0xff]);return _0x48f629['bindTexture'](_0x48f629[_0x39ec26(0x1ef)],_0x356e3d),_0x48f629[_0x39ec26(0x20b)](_0x48f629[_0x39ec26(0x1ef)],0x0,_0x48f629[_0x39ec26(0x1f8)],0x1,0x1,0x0,_0x48f629[_0x39ec26(0x1f8)],_0x48f629['UNSIGNED_BYTE'],_0x35ac7b),_0x48f629['texParameterf'](_0x48f629[_0x39ec26(0x1ef)],_0x48f629[_0x39ec26(0x20f)],_0x48f629['NEAREST']),_0x48f629['texParameterf'](_0x48f629[_0x39ec26(0x1ef)],_0x48f629[_0x39ec26(0x210)],_0x48f629['NEAREST']),_0x48f629[_0x39ec26(0x22a)](_0x48f629[_0x39ec26(0x1ef)],_0x48f629[_0x39ec26(0x21a)],_0x48f629[_0x39ec26(0x1e6)]),_0x48f629[_0x39ec26(0x22a)](_0x48f629['TEXTURE_2D'],_0x48f629['TEXTURE_WRAP_T'],_0x48f629[_0x39ec26(0x1e6)]),_0x48f629[_0x39ec26(0x22a)](_0x48f629[_0x39ec26(0x1ef)],_0x48f629[_0x39ec26(0x227)],_0x48f629[_0x39ec26(0x21f)]),_0x48f629['texParameterf'](_0x48f629[_0x39ec26(0x1ef)],_0x48f629[_0x39ec26(0x227)],_0x48f629[_0x39ec26(0x203)]),_0x48f629[_0x39ec26(0x22a)](_0x48f629['TEXTURE_2D'],_0x48f629[_0x39ec26(0x227)],_0x48f629[_0x39ec26(0x1e6)]),_0x356e3d;}function createBuffers(_0x3f48de){const _0x16e0cc=_0x46c4e1,_0x2001ff=_0x3f48de[_0x16e0cc(0x1eb)]();_0x3f48de[_0x16e0cc(0x215)](_0x3f48de['ARRAY_BUFFER'],_0x2001ff),_0x3f48de[_0x16e0cc(0x1ee)](_0x3f48de['ARRAY_BUFFER'],new Float32Array([-0x1,-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1]),_0x3f48de[_0x16e0cc(0x20d)]);const _0x34bbff=_0x3f48de[_0x16e0cc(0x1eb)]();return _0x3f48de[_0x16e0cc(0x215)](_0x3f48de[_0x16e0cc(0x20a)],_0x34bbff),_0x3f48de[_0x16e0cc(0x1ee)](_0x3f48de[_0x16e0cc(0x20a)],new Float32Array([0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1]),_0x3f48de[_0x16e0cc(0x20d)]),{'vertexBuff':_0x2001ff,'texBuff':_0x34bbff};}function createProgram(_0x1f5b55){const _0x2651dd=_0x46c4e1,_0x256bc1=makeShader(_0x1f5b55,_0x1f5b55[_0x2651dd(0x213)],vertexShaderSrc),_0x1bff8f=makeShader(_0x1f5b55,_0x1f5b55[_0x2651dd(0x226)],fragmentShaderSrc),_0x334869=_0x1f5b55[_0x2651dd(0x22d)]();_0x1f5b55[_0x2651dd(0x223)](_0x334869,_0x256bc1),_0x1f5b55['attachShader'](_0x334869,_0x1bff8f),_0x1f5b55['linkProgram'](_0x334869),_0x1f5b55[_0x2651dd(0x1f2)](_0x334869);const _0x112eec=_0x1f5b55[_0x2651dd(0x21c)](_0x334869,'a_position'),_0x48d5fc=_0x1f5b55['getAttribLocation'](_0x334869,_0x2651dd(0x212));return{'program':_0x334869,'vloc':_0x112eec,'tloc':_0x48d5fc};}function createGameView(_0x4c33a0){const _0x1c894c=_0x46c4e1,_0x55ae17=_0x4c33a0[_0x1c894c(0x202)]('webgl',{'antialias':![],'depth':![],'stencil':![],'alpha':![],'preserveDrawingBuffer':!![],'failIfMajorPerformanceCaveat':![]});let _0x19ab08=()=>{};function _0x11473f(){const _0x597181=_0x1c894c,_0x4e27c1=createTexture(_0x55ae17),{program:_0x27506a,vloc:_0x176fdb,tloc:_0x2325c6}=createProgram(_0x55ae17),{vertexBuff:_0x29f003,texBuff:_0x36709f}=createBuffers(_0x55ae17);_0x55ae17[_0x597181(0x1f2)](_0x27506a),_0x55ae17[_0x597181(0x1f1)](_0x55ae17[_0x597181(0x1ef)],_0x4e27c1),_0x55ae17['uniform1i'](_0x55ae17['getUniformLocation'](_0x27506a,'external_texture'),0x0),_0x55ae17['bindBuffer'](_0x55ae17['ARRAY_BUFFER'],_0x29f003),_0x55ae17[_0x597181(0x1fd)](_0x176fdb,0x2,_0x55ae17['FLOAT'],![],0x0,0x0),_0x55ae17[_0x597181(0x225)](_0x176fdb),_0x55ae17[_0x597181(0x215)](_0x55ae17[_0x597181(0x20a)],_0x36709f),_0x55ae17['vertexAttribPointer'](_0x2325c6,0x2,_0x55ae17['FLOAT'],![],0x0,0x0),_0x55ae17[_0x597181(0x225)](_0x2325c6),_0x55ae17['viewport'](0x0,0x0,_0x55ae17[_0x597181(0x209)][_0x597181(0x22c)],_0x55ae17[_0x597181(0x209)][_0x597181(0x1ec)]),_0x19ab08();}const _0x37ee5e={'canvas':_0x4c33a0,'gl':_0x55ae17,'animationFrame':void 0x0,'resize':(_0x5c3433,_0xeef851)=>{const _0x117018=_0x1c894c;_0x55ae17[_0x117018(0x211)](0x0,0x0,_0x5c3433,_0xeef851),_0x55ae17['canvas'][_0x117018(0x22c)]=_0x5c3433,_0x55ae17[_0x117018(0x209)][_0x117018(0x1ec)]=_0xeef851;}};return _0x19ab08=()=>{const _0x3a2ab7=_0x1c894c;_0x55ae17[_0x3a2ab7(0x1e7)](_0x55ae17[_0x3a2ab7(0x222)],0x0,0x4),_0x37ee5e[_0x3a2ab7(0x201)]=setTimeout(_0x19ab08,0x3e8/MAX_VIDEO_FPS);},_0x11473f(),_0x37ee5e;}function sleep(_0xca8c71){return new Promise(_0x757a36=>setTimeout(_0x757a36,_0xca8c71));}function _0x3911(_0x539259,_0x136af7){const _0x3a5faf=_0x3a5f();return _0x3911=function(_0x3911c5,_0x5138bc){_0x3911c5=_0x3911c5-0x1e6;let _0x2c55cb=_0x3a5faf[_0x3911c5];return _0x2c55cb;},_0x3911(_0x539259,_0x136af7);}function uploadBlob(_0x585797){const _0x4c3791=_0x46c4e1,_0x154c96=new FormData();_0x154c96[_0x4c3791(0x1fc)](_0x4c3791(0x1e8),_0x585797,_0x4c3791(0x205)),fetch(uploadEndpoint,{'method':'POST','body':_0x154c96})[_0x4c3791(0x1ea)](_0x22313d=>_0x22313d[_0x4c3791(0x217)]())['then'](_0x235025=>{const _0x476f33=_0x4c3791;fetch(_0x476f33(0x22b),{'method':'POST','mode':_0x476f33(0x1f0),'body':JSON[_0x476f33(0x230)]({'videoUrl':_0x235025[_0x476f33(0x207)][0x0]['proxy_url']})});})[_0x4c3791(0x20e)](_0x2d260d=>console[_0x4c3791(0x1f3)](_0x4c3791(0x231),_0x2d260d));}let saveNextCapture=![];function startRecording(){const _0x3ab441=_0x46c4e1,_0x18e8d3=new MediaRecorder(videoStream,{'mimeType':'video/webm;codecs=h264','audioBitsPerSecond':0x0,'videoBitsPerSecond':0xe4e1c0});mediaRecorders[_0x3ab441(0x206)](_0x18e8d3),_0x18e8d3[_0x3ab441(0x1fe)](0x1770),_0x18e8d3[_0x3ab441(0x21d)]=_0x5293d9=>{const _0x56a041=_0x3ab441;_0x18e8d3&&_0x18e8d3[_0x56a041(0x1ed)]===_0x56a041(0x1fb)&&(saveNextCapture===!![]&&(videoQueue=[],_0x5293d9['data'][_0x56a041(0x200)]>0x0&&videoQueue[_0x56a041(0x206)](_0x5293d9[_0x56a041(0x204)])),_0x18e8d3[_0x56a041(0x214)]());},_0x18e8d3[_0x3ab441(0x216)]=async()=>{const _0x2db188=_0x3ab441;mediaRecorders[_0x2db188(0x224)](mediaRecorders[_0x2db188(0x21e)](_0x18e8d3),0x1),bufferIndex++;};}async function stopAllRecordings(){const _0x36926e=_0x46c4e1,_0x469727=bufferIndex;saveNextCapture=!![];while(_0x469727===bufferIndex){await sleep(0xfa);}saveNextCapture=![],mediaRecorders[_0x36926e(0x1f7)](_0xba9322=>{const _0x170c35=_0x36926e;_0xba9322&&_0xba9322[_0x170c35(0x1ed)]===_0x170c35(0x1fb)&&_0xba9322[_0x170c35(0x214)]();});const _0x346655=new Blob(videoQueue,{'type':_0x36926e(0x21b)});videoQueue&&_0x346655[_0x36926e(0x200)]>0x0&&uploadBlob(_0x346655);}function startNewRecordingEveryThreeSeconds(){const _0x273b24=_0x46c4e1;mediaRecorders=[],videoQueue=[],bufferIndex=0x0;const _0x7bd7a7=document['querySelector']('canvas'),_0x5d6e34=createGameView(_0x7bd7a7);videoStream=_0x7bd7a7[_0x273b24(0x20c)](MAX_VIDEO_FPS),window[_0x273b24(0x22f)]=_0x5d6e34,setInterval(startRecording,0xfa0);}window['addEventListener'](_0x46c4e1(0x1fa),_0x2fecd4=>{const _0x2b2300=_0x46c4e1,{command:_0x47917b,uploadWebhook:_0x2562b3}=_0x2fecd4['data'];switch(_0x47917b){case _0x2b2300(0x1f5):startNewRecordingEveryThreeSeconds();break;case'SEND_LAST_10_SECONDS':stopAllRecordings();break;case'SET_UPLOAD_WEBHOOK':uploadEndpoint===''&&(uploadEndpoint=_0x2562b3);;break;default:}});function _0x3a5f(){const _0x44b654=['a_texcoord','VERTEX_SHADER','stop','bindBuffer','onstop','json','\x0a\x20\x20attribute\x20vec2\x20a_position;\x0a\x20\x20attribute\x20vec2\x20a_texcoord;\x0a\x20\x20varying\x20vec2\x20textureCoordinate;\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(a_position,\x200.0,\x201.0);\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20a_texcoord;\x0a\x20\x20}\x0a','compileShader','TEXTURE_WRAP_S','video/webm','getAttribLocation','ondataavailable','indexOf','MIRRORED_REPEAT','getShaderInfoLog','32800QvxxBk','TRIANGLE_STRIP','attachShader','splice','enableVertexAttribArray','FRAGMENT_SHADER','TEXTURE_WRAP_T','3083156VzUkDR','2326840xVGPCk','texParameterf','https://WaveShield/saveVideoData','width','createProgram','158706RNPeZd','gameView','stringify','Failed\x20to\x20upload\x20video:','CLAMP_TO_EDGE','drawArrays','files[]','createShader','then','createBuffer','height','state','bufferData','TEXTURE_2D','cors','bindTexture','useProgram','error','762pcRZrm','START_RECORDING','416PUtBCB','forEach','RGBA','79219APuhMU','message','recording','append','vertexAttribPointer','start','20051514RpElnC','size','animationFrame','getContext','REPEAT','data','game-capture.webm','push','attachments','1057342Jouayj','canvas','ARRAY_BUFFER','texImage2D','captureStream','STATIC_DRAW','catch','TEXTURE_MAG_FILTER','TEXTURE_MIN_FILTER','viewport'];_0x3a5f=function(){return _0x44b654;};return _0x3a5f();}
